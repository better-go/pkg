<!DOCTYPE html>
<meta charset="utf-8"/>

<div>
  <h1>SocketIO Echo Test</h1>
  <h2>Just open this html file in web browser.</h2>
</div>

<div>
  <h2>input: </h2>
  <input id="input" type="text"/>
  <button onclick="send()">Send</button>
</div>

<div>
  <h2>output: </h2>
  <pre id="output"></pre>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.slim.js"></script>
<script>

  var input = document.getElementById("input");
  var output = document.getElementById("output");


  // need keep sync !
  // need keep sync !
  // need keep sync !
  // need keep sync !
  var socket = io.connect('ws://localhost:9999', {transports: ['websocket']});


  socket.onopen = function () {
    output.innerHTML += "Status: Connected\n";
  };


  function send() {
    socket.emit('echo', {text: input.value}, function (response) {
      console.log(response);
      output.innerHTML += "Server: " + response.text + "\n";
    });
    input.value = "";
  }


</script>



